// -*- mode: C;-*-
#pragma once
#include "defines.h"

enum PieceType {
    TP_EMPTY = -1,
    TP_I = 0,
    TP_L,
    TP_J,
    TP_O,
    TP_S,
    TP_T,
    TP_Z,

    TP_LEN,
    TP_WALL = TP_LEN,
};
typedef enum PieceType PieceType;

struct Point8 { uint8_t x, y; };
typedef struct Point8 Point8;

Point8 addPoints(Point8 a, Point8 b) { Point8 r = {a.x+b.x, a.y+b.y}; return r; }


typedef Point8 PiecePoints[4];
const PiecePoints PieceRotations[TP_LEN][4] = {
    {{{0, 2}, {1, 2}, {2, 2}, {3, 2}},
     {{2, 3}, {2, 2}, {2, 1}, {2, 0}},
     {{0, 1}, {1, 1}, {2, 1}, {3, 1}},
     {{1, 3}, {1, 2}, {1, 1}, {1, 0}}},
    {{{0, 3}, {0, 2}, {1, 2}, {2, 2}},
     {{1, 3}, {1, 2}, {1, 1}, {2, 3}},
     {{0, 2}, {1, 2}, {2, 2}, {2, 1}},
     {{0, 1}, {1, 3}, {1, 2}, {1, 1}}},
    {{{0, 2}, {1, 2}, {2, 3}, {2, 2}},
     {{1, 3}, {1, 2}, {1, 1}, {2, 1}},
     {{0, 2}, {0, 1}, {1, 2}, {2, 2}},
     {{0, 3}, {1, 3}, {1, 2}, {1, 1}}},
    {{{1, 3}, {1, 2}, {2, 3}, {2, 2}},
     {{1, 3}, {1, 2}, {2, 3}, {2, 2}},
     {{1, 3}, {1, 2}, {2, 3}, {2, 2}},
     {{1, 3}, {1, 2}, {2, 3}, {2, 2}}},
    {{{0, 2}, {1, 3}, {1, 2}, {2, 3}},
     {{1, 3}, {1, 2}, {2, 2}, {2, 1}},
     {{0, 1}, {1, 2}, {1, 1}, {2, 2}},
     {{0, 3}, {0, 2}, {1, 2}, {1, 1}}},
    {{{0, 2}, {1, 3}, {1, 2}, {2, 2}},
     {{1, 3}, {1, 2}, {1, 1}, {2, 2}},
     {{0, 2}, {1, 2}, {1, 1}, {2, 2}},
     {{0, 2}, {1, 3}, {1, 2}, {1, 1}}},
    {{{0, 3}, {1, 3}, {1, 2}, {2, 2}},
     {{1, 2}, {1, 1}, {2, 3}, {2, 2}},
     {{0, 2}, {1, 2}, {1, 1}, {2, 1}},
     {{0, 2}, {0, 1}, {1, 3}, {1, 2}}},

    /*
    {{{0, 1}, {1, 1}, {2, 1}, {3, 1}},
     {{2, 0}, {2, 1}, {2, 2}, {2, 3}},
     {{0, 2}, {1, 2}, {2, 2}, {3, 2}},
     {{1, 0}, {1, 1}, {1, 2}, {1, 3}}},
    {{{0, 0}, {0, 1}, {1, 1}, {2, 1}},
     {{1, 0}, {1, 1}, {1, 2}, {2, 0}},
     {{0, 1}, {1, 1}, {2, 1}, {2, 2}},
     {{0, 2}, {1, 0}, {1, 1}, {1, 2}}},
    {{{0, 1}, {1, 1}, {2, 0}, {2, 1}},
     {{1, 0}, {1, 1}, {1, 2}, {2, 2}},
     {{0, 1}, {0, 2}, {1, 1}, {2, 1}},
     {{0, 0}, {1, 0}, {1, 1}, {1, 2}}},
    {{{1, 0}, {1, 1}, {2, 0}, {2, 1}},
     {{1, 0}, {1, 1}, {2, 0}, {2, 1}},
     {{1, 0}, {1, 1}, {2, 0}, {2, 1}},
     {{1, 0}, {1, 1}, {2, 0}, {2, 1}}},
    {{{0, 1}, {1, 0}, {1, 1}, {2, 0}},
     {{1, 0}, {1, 1}, {2, 1}, {2, 2}},
     {{0, 2}, {1, 1}, {1, 2}, {2, 1}},
     {{0, 0}, {0, 1}, {1, 1}, {1, 2}}},
    {{{0, 1}, {1, 0}, {1, 1}, {2, 1}},
     {{1, 0}, {1, 1}, {1, 2}, {2, 1}},
     {{0, 1}, {1, 1}, {1, 2}, {2, 1}},
     {{0, 1}, {1, 0}, {1, 1}, {1, 2}}},
    {{{0, 0}, {1, 0}, {1, 1}, {2, 1}},
     {{1, 1}, {1, 2}, {2, 0}, {2, 1}},
     {{0, 1}, {1, 1}, {1, 2}, {2, 2}},
     {{0, 1}, {0, 2}, {1, 0}, {1, 1}}},*/
};
